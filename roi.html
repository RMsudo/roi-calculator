<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Website ROI Rechner</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#111a2e;
      --card2:#0f172a;
      --text:#e7eefc;
      --muted:#a8b3cf;
      --accent:#3b82f6;
      --ok:#22c55e;
      --warn:#f59e0b;
      --bad:#ef4444;
      --line:rgba(255,255,255,.10);
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(900px 500px at 20% 10%, rgba(59,130,246,.20), transparent 60%),
                  radial-gradient(900px 500px at 80% 0%, rgba(34,197,94,.14), transparent 55%),
                  var(--bg);
      color:var(--text);
    }
    .wrap{max-width:1180px;margin:0 auto;padding:28px 16px 42px;}
    header{
      display:flex;align-items:flex-start;justify-content:space-between;gap:14px;flex-wrap:wrap;
      margin-bottom:18px;
    }
    h1{margin:0;font-size:28px;letter-spacing:.2px}
    .sub{color:var(--muted);max-width:760px;margin-top:6px;line-height:1.35}
    .btn{
      border:1px solid rgba(255,255,255,.16);
      background:rgba(59,130,246,.16);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
    }
    .btn:hover{background:rgba(59,130,246,.22)}
    .grid{display:grid;grid-template-columns: 380px 1fr;gap:18px;}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), transparent 70%), var(--card);
      border:1px solid rgba(255,255,255,.12);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .card .hd{
      padding:14px 16px;border-bottom:1px solid var(--line);
      display:flex;justify-content:space-between;align-items:center;gap:10px;
    }
    .card .hd h2{margin:0;font-size:16px;color:var(--text)}
    .card .bd{padding:14px 16px}
    .pill{
      font-size:12px;color:var(--muted);border:1px solid rgba(255,255,255,.14);
      padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.04);
    }
    .row{display:grid;grid-template-columns:1fr;gap:10px;margin-bottom:12px}
    label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
    .inp{
      display:flex;align-items:center;gap:8px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(15,23,42,.55);
      padding:10px 12px;border-radius:12px;
    }
    .inp span{color:var(--muted);font-size:13px;min-width:10px}
    input, select{
      width:100%;
      border:none;outline:none;background:transparent;color:var(--text);
      font-size:14px;
    }
    input[type="number"]{appearance:textfield}
    .toggle{
      display:flex;gap:10px;align-items:center;flex-wrap:wrap;
      padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.14);
      background:rgba(15,23,42,.45);
    }
    .tbtn{
      border:1px solid rgba(255,255,255,.12);
      padding:8px 10px;border-radius:10px;
      color:var(--muted);background:rgba(255,255,255,.03);
      cursor:pointer;font-weight:700;font-size:12px;
    }
    .tbtn.active{background:rgba(59,130,246,.22);color:var(--text);border-color:rgba(59,130,246,.35)}
    .hint{font-size:12px;color:var(--muted);margin-top:6px;line-height:1.3}
    .summary{
      background: linear-gradient(90deg, rgba(59,130,246,.45), rgba(34,197,94,.18));
      border:1px solid rgba(255,255,255,.18);
      border-radius:var(--radius);
      padding:14px 16px;
      box-shadow:var(--shadow);
      margin-bottom:14px;
    }
    .summary .k{font-size:12px;color:rgba(255,255,255,.85);font-weight:800;letter-spacing:.6px}
    .summary p{margin:8px 0 0;line-height:1.35}
    .summary b{color:#fff}
    .kpi{display:grid;grid-template-columns: repeat(3, 1fr);gap:12px;margin-bottom:14px}
    @media(max-width:980px){.kpi{grid-template-columns:1fr}}
    .kpi .box{
      background: linear-gradient(180deg, rgba(255,255,255,.04), transparent), var(--card2);
      border:1px solid rgba(255,255,255,.12);
      border-radius:14px;padding:14px 14px;
    }
    .kpi .ttl{font-size:12px;color:var(--muted);font-weight:800;letter-spacing:.4px}
    .kpi .val{font-size:32px;font-weight:900;margin-top:6px}
    .kpi .subv{font-size:12px;color:var(--muted);margin-top:4px}
    table{width:100%;border-collapse:collapse;overflow:hidden;border-radius:14px}
    th, td{
      padding:12px 12px;border-bottom:1px solid rgba(255,255,255,.08);
      text-align:left;font-size:13px;
    }
    th{color:var(--muted);font-weight:900;text-transform:uppercase;font-size:11px;letter-spacing:.5px}
    tr:last-child td{border-bottom:none}
    .badge{
      font-size:11px;font-weight:900;padding:6px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.14);display:inline-block
    }
    .b-worst{background:rgba(245,158,11,.16); color:#ffd89a; border-color:rgba(245,158,11,.22)}
    .b-real{background:rgba(59,130,246,.18); color:#cfe2ff; border-color:rgba(59,130,246,.25)}
    .b-best{background:rgba(34,197,94,.16); color:#bff7d5; border-color:rgba(34,197,94,.22)}
    details{
      margin-top:14px;
      border:1px solid rgba(255,255,255,.12);
      border-radius:14px;
      background:rgba(15,23,42,.35);
      overflow:hidden;
    }
    summary{
      cursor:pointer;
      padding:12px 14px;
      color:var(--text);
      font-weight:900;
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; color:var(--muted)}
    .formula{padding:12px 14px;line-height:1.6;font-size:13px}
    .small{font-size:12px;color:var(--muted)}
    .warnbox{
      margin-top:10px;padding:10px 12px;border-radius:12px;
      border:1px solid rgba(245,158,11,.22);
      background:rgba(245,158,11,.10);
      color:#ffe3b5;
      font-size:12px;line-height:1.35;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Website ROI Calculator</h1>
        <div class="sub">Berechne ROI, Amortisation und Zusatzgewinn eines Website-Redesigns auf Basis von Conversion-Verbesserung. Alles l√§uft lokal in deinem Browser (keine Daten werden gespeichert oder hochgeladen).</div>
      </div>
      <button class="btn" id="btnCopy">Zusammenfassung kopieren</button>
    </header>

    <div class="grid">
      <!-- LEFT: INPUTS -->
      <section class="card">
        <div class="hd">
          <h2>1. Eingaben</h2>
          <span class="pill">MVP ‚Ä¢ kostenlos</span>
        </div>
        <div class="bd">
          <div class="row">
            <label>Basis berechnen √ºber</label>
            <div class="toggle">
              <button class="tbtn active" id="modeCR">Conversion Rate</button>
              <button class="tbtn" id="modeLeads">Anfragen absolut</button>
              <span class="small">(optional)</span>
            </div>
            <div class="hint">Wenn du ‚ÄûAnfragen absolut‚Äú nutzt, wird die aktuelle Conversion Rate automatisch aus Besucher/Monat und Anfragen/Monat berechnet.</div>
          </div>

          <div class="row">
            <label>Investment (Redesign-Kosten)</label>
            <div class="inp"><span>‚Ç¨</span><input id="cost" type="number" min="0" step="100" value="20000"></div>
          </div>

          <div class="row">
            <label>Besucher / Monat</label>
            <div class="inp"><span>üë•</span><input id="visitors" type="number" min="0" step="100" value="3000"></div>
          </div>

          <div class="row" id="leadsRow" style="display:none">
            <label>Anfragen / Monat</label>
            <div class="inp"><span>‚úâÔ∏è</span><input id="leads" type="number" min="0" step="1" value="24"></div>
            <div class="hint">Errechnete aktuelle CR: <b id="crFromLeads">0,80%</b></div>
          </div>

          <div class="row" id="crRow">
            <label>Aktuelle Conversion Rate (%)</label>
            <div class="inp"><span>%</span><input id="crNow" type="number" min="0" max="100" step="0.1" value="0.8"></div>
            <div class="hint">Typisch B2B grob: 0,8%‚Äì2,5% (stark branchenabh√§ngig)</div>
          </div>

          <div class="row">
            <label>Ziel: Realistisches Szenario (Conversion Rate neu)</label>
            <div class="inp">
              <span>%</span>
              <select id="crTarget">
                <option value="1.5">1,5%</option>
                <option value="2.0" selected>2,0% (Standard)</option>
                <option value="2.4">2,4%</option>
                <option value="3.0">3,0%</option>
              </select>
            </div>
          </div>

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
            <div class="row">
              <label>Abschlussquote (%)</label>
              <div class="inp"><span>%</span><input id="close" type="number" min="0" max="100" step="1" value="30"></div>
              <div class="hint">B2B oft 10‚Äì40%</div>
            </div>
            <div class="row">
              <label>Gewinnmarge (%)</label>
              <div class="inp"><span>%</span><input id="margin" type="number" min="0" max="100" step="1" value="25"></div>
              <div class="hint">‚ÄûProfit‚Äú, nicht Umsatz</div>
            </div>
          </div>

          <div class="row">
            <label>√ò Auftragswert (‚Ç¨)</label>
            <div class="inp"><span>‚Ç¨</span><input id="aov" type="number" min="0" step="100" value="5000"></div>
          </div>

          <div class="warnbox" id="validationNote" style="display:none"></div>
        </div>
      </section>

      <!-- RIGHT: OUTPUTS -->
      <section>
        <div class="summary" id="summaryBox">
          <div class="k">MANAGEMENT SUMMARY</div>
          <p id="summaryText"></p>
          <div class="small" style="margin-top:8px">Hinweis: Szenario-Rechnung. Keine Garantie, aber nachvollziehbare Mathematik.</div>
        </div>

        <div class="kpi">
          <div class="box">
            <div class="ttl">ROI (Jahr 1)</div>
            <div class="val" id="kpiROI">‚Äì</div>
            <div class="subv">Return on Investment</div>
          </div>
          <div class="box">
            <div class="ttl">AMORTISATION</div>
            <div class="val" id="kpiPayback">‚Äì</div>
            <div class="subv">Monate bis Break-Even</div>
          </div>
          <div class="box">
            <div class="ttl">ZUSATZGEWINN / JAHR</div>
            <div class="val" id="kpiYear">‚Äì</div>
            <div class="subv">Reiner Profit-Zuwachs</div>
          </div>
        </div>

        <div class="card">
          <div class="hd">
            <h2>Szenario Vergleich</h2>
            <span class="pill">Status quo ‚Ä¢ Worst ‚Ä¢ Realistisch ‚Ä¢ Best</span>
          </div>
          <div class="bd">
            <table>
              <thead>
                <tr>
                  <th>Metrik</th>
                  <th>Status quo</th>
                  <th><span class="badge b-worst">Worst</span></th>
                  <th><span class="badge b-real">Realistisch</span></th>
                  <th><span class="badge b-best">Best</span></th>
                </tr>
              </thead>
              <tbody id="tblBody"></tbody>
            </table>

            <details>
              <summary>Berechnungslogik & Formeln anzeigen</summary>
              <div class="formula mono">
                <div><b>Anfragen (Leads)</b>: Besucher √ó (ConversionRate / 100)</div>
                <div><b>Kunden</b>: Leads √ó (Abschlussquote / 100)</div>
                <div><b>Umsatz</b>: Kunden √ó √ò Auftragswert</div>
                <div><b>Gewinn (Profit)</b>: Umsatz √ó (Marge / 100)</div>
                <div><b>Zusatzgewinn</b>: Gewinn\_neu ‚àí Gewinn\_alt</div>
                <div><b>ROI (Jahr 1)</b>: ((Zusatzgewinn\_Jahr ‚àí Kosten) / Kosten) √ó 100</div>
                <div><b>Amortisation</b>: Kosten / Zusatzgewinn\_Monat</div>
                <hr style="border:none;border-top:1px solid rgba(255,255,255,.08);margin:12px 0">
                <div class="small">
                  <b>Szenarien-Definition:</b><br>
                  ‚Ä¢ Worst: max(CR\_alt √ó 1,5; CR\_alt + 0,1 Prozentpunkte)<br>
                  ‚Ä¢ Realistisch: Auswahl im Dropdown (z. B. 2,0%)<br>
                  ‚Ä¢ Best: max(3,0%; CR\_alt √ó 3) (gedeckelt auf 100%)
                </div>
              </div>
            </details>
          </div>
        </div>
      </section>
    </div>
  </div>

<script>
  // ---------- helpers ----------
  const fmtEUR = (n) => {
    if (!isFinite(n)) return "‚Äì";
    return new Intl.NumberFormat("de-DE", { style:"currency", currency:"EUR", maximumFractionDigits:0 }).format(n);
  };
  const fmtNum = (n, d=0) => {
    if (!isFinite(n)) return "‚Äì";
    return new Intl.NumberFormat("de-DE", { minimumFractionDigits:d, maximumFractionDigits:d }).format(n);
  };
  const clamp = (n, min, max) => Math.min(Math.max(n, min), max);

  function calcScenario({visitors, crNow, close, aov, margin, cost}, crNew){
    const leadsOld = visitors * (crNow/100);
    const leadsNew = visitors * (crNew/100);

    const customersOld = leadsOld * (close/100);
    const customersNew = leadsNew * (close/100);

    const revenueOld = customersOld * aov;
    const revenueNew = customersNew * aov;

    const profitOld = revenueOld * (margin/100);
    const profitNew = revenueNew * (margin/100);

    const deltaProfitMonth = profitNew - profitOld;
    const deltaProfitYear = deltaProfitMonth * 12;

    const roi = (cost > 0) ? ((deltaProfitYear - cost) / cost) * 100 : NaN;
    const payback = (deltaProfitMonth > 0) ? (cost / deltaProfitMonth) : Infinity;

    return {
      crNew, leadsOld, leadsNew, customersOld, customersNew,
      revenueOld, revenueNew, profitOld, profitNew,
      deltaProfitMonth, deltaProfitYear, roi, payback
    };
  }

  function buildScenarios(inputs, crReal){
    const crAlt = inputs.crNow;

    const worst = Math.max(crAlt * 1.5, crAlt + 0.1);
    const best = Math.max(3.0, crAlt * 3);

    return {
      status: calcScenario(inputs, crAlt),
      worst:  calcScenario(inputs, clamp(worst, 0, 100)),
      real:   calcScenario(inputs, clamp(crReal, 0, 100)),
      best:   calcScenario(inputs, clamp(best, 0, 100))
    };
  }

  // ---------- UI state ----------
  let mode = "cr"; // "cr" or "leads"

  const els = {
    cost: document.getElementById("cost"),
    visitors: document.getElementById("visitors"),
    leads: document.getElementById("leads"),
    crNow: document.getElementById("crNow"),
    crTarget: document.getElementById("crTarget"),
    close: document.getElementById("close"),
    margin: document.getElementById("margin"),
    aov: document.getElementById("aov"),

    modeCR: document.getElementById("modeCR"),
    modeLeads: document.getElementById("modeLeads"),
    leadsRow: document.getElementById("leadsRow"),
    crRow: document.getElementById("crRow"),
    crFromLeads: document.getElementById("crFromLeads"),

    summaryText: document.getElementById("summaryText"),
    kpiROI: document.getElementById("kpiROI"),
    kpiPayback: document.getElementById("kpiPayback"),
    kpiYear: document.getElementById("kpiYear"),
    tblBody: document.getElementById("tblBody"),
    btnCopy: document.getElementById("btnCopy"),
    validationNote: document.getElementById("validationNote"),
  };

  function getInputs(){
    const cost = Number(els.cost.value || 0);
    const visitors = Number(els.visitors.value || 0);
    const close = Number(els.close.value || 0);
    const aov = Number(els.aov.value || 0);
    const margin = Number(els.margin.value || 0);

    let crNow = Number(els.crNow.value || 0);

    if (mode === "leads"){
      const leads = Number(els.leads.value || 0);
      crNow = (visitors > 0) ? (leads / visitors) * 100 : 0;
      els.crFromLeads.textContent = fmtNum(crNow, 2) + "%";
    }

    // clamp sanity
    return {
      cost: Math.max(cost, 0),
      visitors: Math.max(visitors, 0),
      crNow: clamp(crNow, 0, 100),
      close: clamp(close, 0, 100),
      aov: Math.max(aov, 0),
      margin: clamp(margin, 0, 100),
    };
  }

  function validate(inputs){
    const notes = [];

    if (inputs.visitors === 0){
      notes.push("Besucher/Monat = 0 ‚Üí keine Leads m√∂glich, Ergebnisse werden 0.");
    }
    if (inputs.cost === 0){
      notes.push("Kosten = 0 ‚Üí ROI ist mathematisch nicht sinnvoll (Division durch 0).");
    }
    if (inputs.close < 5){
      notes.push("Abschlussquote wirkt sehr niedrig (<5%). Falls das stimmt, okay ‚Äî sonst pr√ºfe den Wert.");
    }
    if (inputs.close > 70){
      notes.push("Abschlussquote >70% ist selten. Pr√ºfe, ob du 70 statt 7 eingegeben hast.");
    }
    if (inputs.crNow > 20){
      notes.push("Aktuelle Conversion Rate >20% ist ungew√∂hnlich. Pr√ºfe die Einheit (Prozent).");
    }

    if (notes.length){
      els.validationNote.style.display = "block";
      els.validationNote.textContent = notes.join(" ");
    } else {
      els.validationNote.style.display = "none";
      els.validationNote.textContent = "";
    }
  }

  function render(){
    const inputs = getInputs();
    validate(inputs);

    const crReal = Number(els.crTarget.value || 2.0);
    const S = buildScenarios(inputs, crReal);

    // KPIs based on realistic scenario
    const r = S.real;
    const roiText = isFinite(r.roi) ? (fmtNum(r.roi, 0) + "%") : "‚Äì";
    const paybackText = (r.payback === Infinity) ? "nicht" : fmtNum(r.payback, 1);
    const yearText = fmtEUR(r.deltaProfitYear);

    els.kpiROI.textContent = roiText;
    els.kpiPayback.textContent = paybackText;
    els.kpiYear.textContent = yearText;

    // Summary text
    const summary = [
      `Bei ${fmtNum(inputs.visitors,0)} Besuchern/Monat und aktuell ${fmtNum(inputs.crNow,2)}% Conversion Rate ergibt sich im realistischen Szenario (${fmtNum(r.crNew,2)}%) ein zus√§tzlicher Gewinn von `,
      `${fmtEUR(r.deltaProfitMonth)}/Monat. `,
      `Die Investition von ${fmtEUR(inputs.cost)} amortisiert sich `,
      (r.payback === Infinity ? `nicht (Zusatzgewinn ‚â§ 0).` : `nach ca. ${fmtNum(r.payback,1)} Monaten.`),
      ` ROI im ersten Jahr: ${roiText}.`
    ].join("");

    els.summaryText.textContent = summary;

    // Table rows
    const rows = [
      ["Conversion Rate", `${fmtNum(S.status.crNew,2)}%`, `${fmtNum(S.worst.crNew,2)}%`, `${fmtNum(S.real.crNew,2)}%`, `${fmtNum(S.best.crNew,2)}%`],
      ["Anfragen / Monat", fmtNum(S.status.leadsNew,0), fmtNum(S.worst.leadsNew,0), fmtNum(S.real.leadsNew,0), fmtNum(S.best.leadsNew,0)],
      ["Kunden / Monat", fmtNum(S.status.customersNew,1), fmtNum(S.worst.customersNew,1), fmtNum(S.real.customersNew,1), fmtNum(S.best.customersNew,1)],
      ["Umsatz / Monat", fmtEUR(S.status.revenueNew), fmtEUR(S.worst.revenueNew), fmtEUR(S.real.revenueNew), fmtEUR(S.best.revenueNew)],
      ["Gewinn / Monat", fmtEUR(S.status.profitNew), fmtEUR(S.worst.profitNew), fmtEUR(S.real.profitNew), fmtEUR(S.best.profitNew)],
      ["Zusatzgewinn / Monat", "‚Äì", fmtEUR(S.worst.deltaProfitMonth), fmtEUR(S.real.deltaProfitMonth), fmtEUR(S.best.deltaProfitMonth)],
      ["Zusatzgewinn / Jahr", "‚Äì", fmtEUR(S.worst.deltaProfitYear), fmtEUR(S.real.deltaProfitYear), fmtEUR(S.best.deltaProfitYear)],
      ["ROI (Jahr 1)", "‚Äì",
        isFinite(S.worst.roi) ? fmtNum(S.worst.roi,0) + "%" : "‚Äì",
        isFinite(S.real.roi) ? fmtNum(S.real.roi,0) + "%" : "‚Äì",
        isFinite(S.best.roi) ? fmtNum(S.best.roi,0) + "%" : "‚Äì"
      ],
      ["Amortisation (Monate)", "‚Äì",
        (S.worst.payback === Infinity) ? "nicht" : fmtNum(S.worst.payback,1),
        (S.real.payback === Infinity) ? "nicht" : fmtNum(S.real.payback,1),
        (S.best.payback === Infinity) ? "nicht" : fmtNum(S.best.payback,1)
      ],
    ];

    els.tblBody.innerHTML = rows.map(r => `
      <tr>
        <td style="color:var(--text);font-weight:800">${r[0]}</td>
        <td>${r[1]}</td>
        <td>${r[2]}</td>
        <td><b>${r[3]}</b></td>
        <td>${r[4]}</td>
      </tr>
    `).join("");

    // store summary for copy button
    els.btnCopy.dataset.summary = summary;
  }

  // Mode toggle
  function setMode(next){
    mode = next;
    if (mode === "cr"){
      els.modeCR.classList.add("active");
      els.modeLeads.classList.remove("active");
      els.crRow.style.display = "block";
      els.leadsRow.style.display = "none";
    } else {
      els.modeLeads.classList.add("active");
      els.modeCR.classList.remove("active");
      els.crRow.style.display = "none";
      els.leadsRow.style.display = "block";
    }
    render();
  }

  els.modeCR.addEventListener("click", () => setMode("cr"));
  els.modeLeads.addEventListener("click", () => setMode("leads"));

  // Re-render on input changes
  ["input","change"].forEach(evt => {
    [els.cost, els.visitors, els.leads, els.crNow, els.crTarget, els.close, els.margin, els.aov].forEach(el => {
      el.addEventListener(evt, render);
    });
  });

  // Copy summary
  els.btnCopy.addEventListener("click", async () => {
    const text = els.btnCopy.dataset.summary || "";
    try{
      await navigator.clipboard.writeText(text);
      els.btnCopy.textContent = "Kopiert ‚úÖ";
      setTimeout(()=> els.btnCopy.textContent = "Zusammenfassung kopieren", 1200);
    } catch(e){
      alert("Kopieren hat nicht geklappt. Markiere den Text manuell.");
    }
  });

  // first render
  render();
</script>
</body>
</html>
